## Lots of script here. :(

#macro(DrawLocation $loc)
	<div>
		<strong>$loc.FacilityName</strong><br>
		$loc.PostalAddress.City, $loc.PostalAddress.PoliticalSubUnitName<br>
		#if ($loc.HasContact)
			Contact:
			#if (!$Tools.IsNullOrWhitespace($loc.CTGovContact.SurName))
				$loc.CTGovContact.SurName
			#else
				Name Not Available
			#end
			<br>
			#if (!$Tools.IsNullOrWhitespace($loc.CTGovContact.Phone))
			Phone: $loc.CTGovContact.Phone
			#end			

			#if (!$Tools.IsNullOrWhitespace($loc.CTGovContact.Email))
				Email: $loc.CTGovContact.Email
			#end
		#end
		<br>
		<br>
	<div>
#end

<div class="medium-9 columns">
Status: $SearchResults.Trial.CurrentProtocolStatus
<div class="accordion desktop">
	<section>
	<h2>Trial Phase & Type</h2>	
		<div>
			<table class="table-default">
				<tr>
					<th>Phase</th>
					<th>Type</th>
					<th>Status</th>
					<th>Age</th>
				</tr>
				<tr>
					<td>$SearchResults.Trial.JoinedPhases</td>
					<td>$SearchResults.Trial.JoinedTrialTypes</td>
					<td>$SearchResults.Trial.CurrentProtocolStatus</td>
					<td>$SearchResults.Trial.Eligibility.AgeText</td>
					## Need to A) Find out where NCTID goes, and B) if it is OrgStudyID, then it is not duplicated.
				</tr>
			</table>
		</div>
	</section>
	<section>
	<h2>Description</h2>	
		<div>
			$SearchResults.Trial.BriefSummary
		</div>
	</section>
	<section>
	<h2>Trial Objectives and Outline</h2>
		<div>
			$SearchResults.Trial.DetailedDescription
		</div>
	</section>
	<section>
	<h2>Eligibility Criteria</h2>	
		<div>
			$SearchResults.Trial.CTEntryCriteria
		</div>
	</section>

	<section>
		<h2>Lead Organization</h2>
		<div>
			[SPONSOR/LEADORG HeRE]
		</div>
	</section>

	<section>
		<h2>Contacts & Locations</h2>
		<div>
			#if ($SearchResults.Trial.GetAllSortedLocations().USA.Count > 0)
				<div data-filter-country="U.S.A">
					#foreach($state in $SearchResults.Trial.GetAllSortedLocations().USA)
					#each
							<div>
								<h3>$state.key</h3>
								#foreach($loc in $state.Value)
								#each
									#DrawLocation($loc)
								#end
							</div>
					#end
				</div>
			#end
			#if ($SearchResults.Trial.GetAllSortedLocations().Canada.Count > 0)
				<div data-filter-country="Canada">
					#foreach($state in $SearchResults.Trial.GetAllSortedLocations().Canada)
					#each
							<div>
								<h3>$state.key</h3>
								#foreach($loc in $state.Value)
								#each
									<div>
										$loc.FacilityName<br>
										$loc.PostalAddress.City, $loc.PostalAddress.PoliticalSubUnitName<br>
										<br>
										<br>
									<div>
								#end
							</div>
					#end
				</div>
			#end
			#if ($SearchResults.Trial.GetAllSortedLocations().Other.Count > 0)
				<div data-filter-country="Other">
					#foreach($state in $SearchResults.Trial.GetAllSortedLocations().Other)
					#each
							<div>
								<h3>$state.key</h3>
								#foreach($loc in $state.Value)
								#each
									<div>
										$loc.FacilityName<br>
										$loc.PostalAddress.City, $loc.PostalAddress.PoliticalSubUnitName<br>
										<br>
										<br>
									<div>
								#end
							</div>
					#end
				</div>
			#end

		</div>
	</section>

	<section>
		<h2>Trial IDs</h2>
		<div>
			<strong>Primary ID</strong> $SearchResults.Trial.OrgStudyID <br>
			<strong>Secondary IDs</strong> $SearchResults.Trial.SecondaryIDList <br>
			<strong>Clinicaltrials.gov ID</strong> $SearchResults.Trial.NCTID <br>

		</div>
	</section>
	
</div>
</div>
<div class="medium-3 columns">
	Content Here
</div>
